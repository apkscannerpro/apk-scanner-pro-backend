<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>APK Scanner Pro ‚Äì Free AI APK Malware Scanner</title>
  <meta name="description" content="APK Scanner Pro lets you instantly scan and analyze APK files with AI + VirusTotal + Bitdefender. 200 free scans daily, then just $1 per scan. Protect your Android from hidden malware, spyware & trojans."/>
  <meta name="keywords" content="APK Scanner, APK Scanner Pro, scan apk, free apk malware scan, android security, apk virus checker, AI malware scanner"/>
  <meta name="robots" content="index, follow"/>

  <!-- Open Graph -->
  <meta property="og:title" content="APK Scanner Pro ‚Äì Free AI APK Malware Scanner"/>
  <meta property="og:description" content="200 free APK scans/day. Secure AI malware detection powered by VirusTotal + Bitdefender."/>
  <meta property="og:image" content="{{ url_for('static', filename='logo.png') }}"/>
  <meta property="og:url" content="https://apkscannerpro.com"/>
  <meta property="og:type" content="website"/>

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image"/>
  <meta name="twitter:title" content="APK Scanner Pro ‚Äì Free AI APK Malware Scanner"/>
  <meta name="twitter:description" content="Scan APKs instantly with AI + VirusTotal + Bitdefender. First 200 scans free daily, then $1/scan."/>
  <meta name="twitter:image" content="{{ url_for('static', filename='logo.png') }}"/>

  <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}"/>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    body { font-family:'Poppins',sans-serif; margin:0; background:#0a0a0a; color:#fff; }
    header { background:linear-gradient(135deg,#0072ff,#00c6ff); padding:2.5rem 1rem; text-align:center; }
    header img { max-height:90px; }
    header h1 { margin:1rem 0; font-size:2.8rem; font-weight:700; }
    header p { font-size:1.2rem; max-width:720px; margin:0 auto; opacity:0.95; }
    .btn { background:#ff4757; color:#fff; padding:1rem 2rem; border:none; border-radius:8px; font-size:1.1rem; font-weight:600; cursor:pointer; transition:0.3s; display:inline-block; margin-top:1rem; }
    .btn:hover { background:#ff6b81; }
    .container { max-width:950px; margin:3rem auto; padding:0 1rem; text-align:center; }
    section { margin-bottom:3rem; }
    h2 { color:#00c6ff; font-size:2rem; margin-bottom:1rem; }
    ul { list-style:none; padding:0; margin:0; }
    ul li { margin:0.6rem 0; font-size:1.1rem; }
    #quota { font-weight:600; margin:1rem 0; font-size:1.2rem; }
    form input { margin:0.5rem 0; padding:0.8rem; width:280px; max-width:90%; border-radius:6px; border:none; font-size:1rem; }
    #report { margin-top:1.5rem; color:#0f0; white-space:pre-wrap; background:#111; padding:1rem; border-radius:6px; max-height:400px; overflow:auto; text-align:left; }
    .adsense,.affiliate { border:2px dashed #444; padding:1.5rem; margin:2rem auto; border-radius:10px; font-size:1rem; color:#aaa; }
    footer { background:#111; padding:2rem 1rem; color:#ccc; font-size:0.9rem; text-align:center; }
    footer a { color:#00c6ff; margin:0 0.5rem; }
    .social-links a { margin:0 0.8rem; color:#00c6ff; font-weight:600; }
    /* Payment Popup */
    #paymentPopup { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.9); justify-content:center; align-items:center; z-index:999; }
    .popup-content { background:#1a1a1a; padding:2rem; border-radius:10px; text-align:center; max-width:400px; margin:20px; }
  </style>
</head>
<body>
  <header>
    <img src="{{ url_for('static', filename='logo.png') }}" alt="APK Scanner Logo ‚Äì Secure Android APK Malware Scanner">
    <h1>APK Scanner Pro</h1>
    <p>Instantly scan and analyze APK files with <strong>AI + VirusTotal + Bitdefender</strong>. 200 free scans daily, then only $1 per scan. Stay protected from hidden malware, spyware, and trojans.</p>
    <button class="btn" onclick="document.getElementById('uploadSection').scrollIntoView({behavior:'smooth'})">üöÄ Scan APK Now</button>
  </header>

  <div class="container">
    <section>
      <h2>‚úÖ Why Choose APK Scanner?</h2>
      <ul>
        <li>‚ö° Lightning-fast malware scans using AI + VirusTotal + Bitdefender</li>
        <li>üéÅ 200 free APK scans every day (per device/IP)</li>
        <li>üìß Automated PDF/email reports instantly delivered</li>
        <li>üõ°Ô∏è 100% private ‚Äî scans processed in-memory, never stored</li>
        <li>üí≥ After free limit ‚Üí unlock extra scans for <strong>$1 each</strong> via secure Paddle checkout</li>
      </ul>
    </section>

    <section id="uploadSection">
      <h2>üîç Scan Your APK</h2>
      <p id="quota">Checking scan quota...</p>
      <form id="scanForm">
        <input type="file" id="apkInput" name="apk" accept=".apk" required><br>
        <input type="email" id="emailInput" name="email" placeholder="Your email (report sent here)" required><br>
        <button class="btn" type="submit">Upload & Scan</button>
      </form>
      <div id="report"></div>
    </section>

    <section class="newsletter">
      <h2>üì© Stay Updated</h2>
      <p>Get malware alerts, Android security tips & exclusive offers.</p>
      <form id="newsletterForm">
        <input type="text" name="name" placeholder="Your Name" required>
        <input type="email" name="email" placeholder="Your Email" required>
        <button class="btn" type="submit">Subscribe</button>
      </form>
    </section>

    <!-- AdSense Slot -->
    <section class="adsense">
      [ Google AdSense Placeholder ]
    </section>

    <!-- Affiliate Slot -->
    <section class="affiliate">
      [ Bitdefender Affiliate Placeholder ]
    </section>
  </div>

  <!-- Payment Popup -->
  <div id="paymentPopup">
    <div class="popup-content">
      <h2>‚ö†Ô∏è Free Scan Limit Reached</h2>
      <p>You‚Äôve used up your 200 free scans for today.</p>
      <p><strong>$1 per scan</strong></p>
      <a href="[PADDLE_CHECKOUT_LINK]" class="btn" target="_blank">Pay with Paddle</a><br>
      <div style="margin-top:1rem;font-size:0.9rem;">After payment, resume scanning immediately.</div>
    </div>
  </div>

  <footer>
    <div class="social-links">
      <a href="https://www.tiktok.com/@apkscannerpro" target="_blank">TikTok</a>|
      <a href="https://instagram.com/apkscannerpro" target="_blank">Instagram</a>
    </div>
    <p>&copy; 2025 APK Scanner Pro ‚Ä¢ 
      <a href="/pricing">Pricing</a> | 
      <a href="/privacy">Privacy Policy</a> | 
      <a href="/terms">Terms</a> | 
      <a href="/refund-policy">Refund Policy</a> | 
      <a href="/thank-you">Thank You</a> ‚Ä¢ 
      <a href="mailto:support@apkscannerpro.com">Support</a>
    </p>
  </footer>

  <script>
    async function updateQuota() {
      const q=document.getElementById('quota');
      try {
        const res=await fetch('/scan-stats');
        const data=await res.json();
        if(data.free_scans_remaining>0){
          q.textContent=`üéâ ${data.free_scans_remaining} free scans remaining today`;
        } else {
          q.innerHTML=`‚ö†Ô∏è No free scans left today. <a href="#" onclick="showPopup()">Continue Scanning</a>`;
        }
      } catch { q.textContent="‚ö†Ô∏è Unable to load quota."; }
    }
    updateQuota();

    document.getElementById('scanForm').addEventListener('submit',async e=>{
      e.preventDefault();
      const file=document.getElementById('apkInput').files[0];
      const email=document.getElementById('emailInput').value;
      if(!file||!email) return alert('File and email are required');
      const fd=new FormData(); fd.append('apk',file); fd.append('email',email);
      const btn=e.target.querySelector('button');
      btn.disabled=true; btn.textContent='Scanning...';
      const reportBox=document.getElementById('report'); reportBox.textContent='';
      try{
        const res=await fetch('/scan',{method:'POST',body:fd});
        const json=await res.json();
        if(res.status===403&&json.payment_required){ showPopup(); }
        else if(json.report){ reportBox.innerHTML=`<pre>${json.report}</pre>`; }
        else { reportBox.style.color='#f66'; reportBox.textContent=json.error||'Scan failed'; }
        updateQuota();
      } catch { reportBox.style.color='#f66'; reportBox.textContent='Upload failed'; }
      btn.disabled=false; btn.textContent='Upload & Scan';
    });

    document.getElementById('newsletterForm').addEventListener('submit',async e=>{
      e.preventDefault();
      const fd=new FormData(e.target);
      const res=await fetch('/subscribe',{method:'POST',body:fd});
      const json=await res.json();
      alert(json.ok?'Subscribed!':(json.error||'Subscribe failed'));
    });

    function showPopup(){ document.getElementById('paymentPopup').style.display='flex'; }
  </script>
</body>
</html>
