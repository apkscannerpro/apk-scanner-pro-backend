<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>APK Scanner Pro ‚Äì Free AI APK Malware Scanner</title>
  <meta name="description" content="APK Scanner Pro uses AI + VirusTotal to scan Android APK files instantly for malware, viruses, and threats. 200 free scans per day, then $0.50/scan. Fully automated for passive income." />
  <meta name="keywords" content="APK Scanner, scan apk, apk malware, android apk scanner, free apk scan, ai apk malware scanner" />
  <meta name="robots" content="index, follow">

  <!-- Open Graph -->
  <meta property="og:title" content="APK Scanner Pro ‚Äì Free AI APK Malware Scanner" />
  <meta property="og:description" content="Scan Android APKs instantly with AI. 200 free scans/day, then pays per scan." />
  <meta property="og:image" content="{{ url_for('static', filename='logo.png') }}" />
  <meta property="og:url" content="https://apkscannerpro.com" />
  <meta property="og:type" content="website">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="APK Scanner Pro ‚Äì Free AI APK Malware Scanner" />
  <meta name="twitter:description" content="Instant AI malware scans on APK files. First 200 free scans/day. Automated, secure, and easy." />
  <meta name="twitter:image" content="{{ url_for('static', filename='logo.png') }}" />

  <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    body { font-family: 'Poppins', sans-serif; margin: 0; background: #0a0a0a; color: #fff; text-align:center; }
    header { background: linear-gradient(90deg,#00c6ff,#0072ff); padding:2rem; }
    header img { max-height: 80px; }
    header h1 { margin:0.8rem 0; font-size:2.6rem; font-weight:700; }
    header p { font-size:1.2rem; max-width:700px; margin:0 auto; }
    .btn { background:#ff4757; color:#fff; padding:1rem 2rem; border:none; font-size:1.1rem; border-radius:8px; cursor:pointer; margin-top:1rem; font-weight:600; transition:0.3s; }
    .btn:hover { background:#ff6b81; }
    .container { max-width:900px; margin:2rem auto; padding:0 1rem; }
    section { margin-bottom:3rem; }
    h2 { color:#00c6ff; font-size:2rem; margin-bottom:0.8rem; font-weight:600; }
    ul { padding-left:0; list-style:none; }
    ul li { margin:0.5rem 0; font-size:1.1rem; }
    a { color:#00c6ff; text-decoration:none; }
    footer { background:#111; padding:2rem 1rem; color:#ccc; font-size:0.9rem; }
    footer a { color:#00c6ff; margin:0 0.5rem; }
    .newsletter input { padding:0.8rem; margin:0.5rem; border-radius:6px; border:none; font-size:1rem; width:250px; max-width:80%; }
    .newsletter .btn { margin-top:0.5rem; }
    #paymentPopup { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.9); justify-content:center; align-items:center; z-index:999; }
    .popup-content { background:#1a1a1a; padding:2rem; border-radius:10px; text-align:center; max-width:400px; margin:20px; }
    .popup-content .btn { margin-top:1rem; }
    #quota { margin-bottom:1rem; font-size:1.1rem; font-weight:600; }
    #report { margin-top:1.5rem; color:#0f0; white-space:pre-wrap; background:#111; padding:1rem; border-radius:6px; max-height:400px; overflow:auto; text-align:left; }
    .adsense, .affiliate { border:2px dashed #444; padding:1.5rem; margin:1.5rem auto; border-radius:10px; font-size:1rem; color:#aaa; }
    .social-links a { margin:0 0.8rem; font-size:1.2rem; color:#00c6ff; }
  </style>
</head>
<body>
  <header>
    <img src="{{ url_for('static', filename='logo.png') }}" alt="APK Scanner Pro">
    <h1>APK Scanner Pro</h1>
    <p>AI-powered APK malware scanner ‚Äì Automated, hands-free & built for maximum protection</p>
    <button class="btn" onclick="document.getElementById('uploadSection').scrollIntoView({behavior:'smooth'})">üöÄ Scan APK Now</button>
  </header>

  <div class="container">
    <section>
      <h2>üöÄ Why Choose APK Scanner Pro?</h2>
      <ul>
        <li>‚ö° Instant malware scans of APK files using AI + VirusTotal</li>
        <li>üéÅ 200 free scans every day per device/IP</li>
        <li>üõ°Ô∏è No storage ‚Äî scans processed in-memory only</li>
        <li>üìß Automated email reports so it runs while you sleep</li>
        <li>üí≥ Easy payment after free limit ‚Äî $0.50 or $1 per scan</li>
      </ul>
    </section>

    <section id="uploadSection">
      <h2>üîç Scan Your APK</h2>
      <p id="quota">Checking scan quota...</p>
      <form id="scanForm">
        <input type="file" id="apkInput" name="apk" accept=".apk" required><br>
        <input type="email" id="emailInput" name="email" placeholder="Your email (report sent here)" required><br>
        <button class="btn" type="submit">Upload & Scan</button>
      </form>
      <div id="report"></div>
    </section>

    <section class="newsletter">
      <h2>üì© Stay Updated</h2>
      <p>Get malware alerts, updates & exclusive security tips.</p>
      <form id="newsletterForm">
        <input type="text" name="name" placeholder="Your Name" required>
        <input type="email" name="email" placeholder="Your Email" required>
        <button class="btn" type="submit">Subscribe</button>
      </form>
    </section>

    <!-- AdSense Slot -->
    <section class="adsense">
      [ Google AdSense Placeholder ]
    </section>

    <!-- Affiliate Slot -->
    <section class="affiliate">
      [ Bitdefender Affiliate Placeholder ]
    </section>
  </div>

  <!-- Payment Popup -->
  <div id="paymentPopup">
    <div class="popup-content">
      <h2>‚ö†Ô∏è Free Scan Limit Reached</h2>
      <p>You‚Äôve used up your 200 free scans for today.</p>
      <p><strong>$0.50 per scan</strong> or <strong>$1 for 2 scans</strong></p>
      <a href="[PAYONNER_PAYMENT_LINK]" class="btn" target="_blank">Pay with Payoneer</a><br>
      <div style="margin-top:1rem;font-size:0.9rem;">After payment, resume scanning immediately.</div>
    </div>
  </div>

  <footer>
    <div class="social-links">
      <a href="https://twitter.com" target="_blank">Twitter</a> |
      <a href="https://facebook.com" target="_blank">Facebook</a> |
      <a href="https://linkedin.com" target="_blank">LinkedIn</a>
    </div>
    <p>&copy; 2025 APK Scanner Pro ‚Ä¢ 
      <a href="/privacy">Privacy Policy</a> | 
      <a href="/terms">Terms of Service</a> ‚Ä¢ 
      <a href="mailto:support@apkscannerpro.com">Contact Support</a>
    </p>
  </footer>

  <script>
    async function updateQuota() {
      const q = document.getElementById('quota');
      try {
        const res = await fetch('/scan-stats');
        const data = await res.json();
        if (data.free_scans_remaining > 0) {
          q.textContent = `üéâ ${data.free_scans_remaining} free scans remaining today`;
        } else {
          q.innerHTML = `‚ö†Ô∏è No free scans left today. <a href="#" onclick="showPopup()">Continue Scanning</a>`;
        }
      } catch {
        q.textContent = "‚ö†Ô∏è Unable to load quota.";
      }
    }
    updateQuota();

    document.getElementById('scanForm').addEventListener('submit', async e => {
      e.preventDefault();
      const fileInput = document.getElementById('apkInput');
      const emailInput = document.getElementById('emailInput');
      if (!fileInput.files.length || !emailInput.value) return alert('File and email are required');
      const fd = new FormData();
      fd.append('apk', fileInput.files[0]);
      fd.append('email', emailInput.value);
      const btn = e.target.querySelector('button');
      btn.disabled=true; btn.textContent='Scanning...';
      const reportBox = document.getElementById('report');
      reportBox.style.color = '#0f0';
      reportBox.textContent = '';
      try {
        const res = await fetch('/scan',{ method:'POST', body:fd });
        const json = await res.json();
        if (res.status === 403 && json.payment_required) {
          showPopup();
        } else if (json.report) {
          reportBox.innerHTML = `<pre>${json.report}</pre>`;
        } else {
          reportBox.style.color='#f66';
          reportBox.textContent = json.error || 'Scan failed';
        }
        updateQuota();
      } catch {
        reportBox.style.color='#f66';
        reportBox.textContent = 'Upload failed';
      }
      btn.disabled=false; btn.textContent='Upload & Scan';
    });

    document.getElementById('newsletterForm').addEventListener('submit', async e => {
      e.preventDefault();
      const fd=new FormData(e.target);
      const res=await fetch('/subscribe',{method:'POST',body:fd});
      const json=await res.json();
      alert(json.ok ? 'Subscribed!' : (json.error||'Subscribe failed'));
    });

    function showPopup() {
      document.getElementById('paymentPopup').style.display='flex';
    }
  </script>
</body>
</html>
